@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --brand: theme('colors.orange.600');
  --text-1: theme('colors.slate.800');
  --text-2: theme('colors.slate.700');
  --text-3: theme('colors.slate.600');
  --text-4: theme('colors.slate.500');
  --surface: theme('colors.white');
  --surface-1: theme('colors.slate.50');
  --surface-2: theme('colors.slate.100');
  --surface-3: theme('colors.slate.200');
  --surface-4: theme('colors.slate.300');

  --border: #e5e7eb;

  --font-remote: var(--font-remote-sans);

  .shiki,
  .shiki span {
    font-style: normal !important; /* 代码块渲染禁止斜体 */
  }
}

:root.dark {
  --brand: theme('colors.slate.200');
  --text-1: theme('colors.slate.50');
  --text-2: theme('colors.slate.100');
  --text-3: theme('colors.slate.200');
  --text-4: theme('colors.slate.300');
  --surface: #000212;
  --surface-1: theme('colors.slate.800');
  --surface-2: theme('colors.slate.700');
  --surface-3: theme('colors.slate.600');
  --surface-4: theme('colors.slate.500');

  --border: theme('colors.slate.700');

  .shiki,
  .shiki span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
    font-style: normal !important; /* 代码块渲染禁止斜体 */
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
  }
}

@layer utilities {
  @keyframes hello {
    50% {
      transform: translateY(-25%) rotateZ(15deg);
    }
  }

  @keyframes breath {
    to {
      scale: 0.8;
    }
  }

  @keyframes fade-in {
    to {
      opacity: 1;
    }
  }

  @keyframes fade-out {
    to {
      opacity: 0;
    }
  }

  .animation-hello {
    animation: hello 3s infinite ease;
  }

  .animation-fade-in {
    animation: fade-in 0.5s ease forwards;
  }

  .animation-fade-out {
    animation: fade-out 0.5s ease forwards;
  }

  .animation-breath {
    animation: breath ease 2s alternate infinite;
  }
}

.shiki {
  .line {
    display: block;
  }
}

/* 代码块增加行号和竖线 */
code {
  counter-reset: step;
  counter-increment: step 0;
}

code .line:not(:last-child)::before {
  content: counter(step) ' ';
  counter-increment: step;
  width: 2rem;
  margin-right: 0.5rem;
  display: inline-block;
  text-align: right;
  color: rgba(100, 120, 130, 0.6);
  position: relative;
  left: -4px;
}

code .line:not(:last-child) {
  position: relative;
}

code .line:not(:last-child)::after {
  content: '';
  position: absolute;
  left: 2rem;
  top: 0;
  bottom: 0;
  border-left: 1px solid rgba(100, 120, 130, 0.6);
}

/* 鼠标不在代码块时隐藏复制按钮 */
.hide-btn {
  display: none;
  position: absolute;
  z-index: 10;
}

.relative:hover .hide-btn {
  display: block;
}

/* 固定文章的目录且可滚动 */
.sticky {
  max-height: 80vh;
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
}

/* 隐藏引用块的引号 */
.prose
  :where(blockquote p:first-of-type):not(
    :where([class~='not-prose'], [class~='not-prose'] *)
  )::before {
  content: no-open-quote;
}

.prose
  :where(blockquote p:last-of-type):not(
    :where([class~='not-prose'], [class~='not-prose'] *)
  )::after {
  content: no-close-quote;
}
